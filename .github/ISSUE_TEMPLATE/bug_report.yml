name: Bug æŠ¥å‘Š / Bug Report
description: Bug / å´©æºƒ / è¯†åˆ«é—®é¢˜ / Bug, Crash, or Recognition Issues
labels: ["bug"]
body:
    - type: markdown
      attributes:
          value: |
              ## æäº¤å‰è¯·é˜…è¯» / Please Read Before Submitting

              ğŸ“– **[é—®é¢˜åé¦ˆæŒ‡å— / Troubleshooting Guide](https://github.com/MaaXYZ/MaaFramework/blob/main/docs/zh_cn/5.1-é—®é¢˜åé¦ˆ.md)**

              âš ï¸ **è¯·å…ˆæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬çš„ MaaFrameworkï¼Œç¡®è®¤é—®é¢˜æ˜¯å¦ä»ç„¶å­˜åœ¨åå†æäº¤ Issueã€‚**  
              âš ï¸ **Please update to the latest version of MaaFramework and verify the issue still exists before submitting.**

    - type: dropdown
      id: issue_type
      attributes:
          label: é—®é¢˜ç±»å‹ / Issue Type
          description: |
              è¯·é€‰æ‹©é—®é¢˜ç±»å‹  
              Select the type of issue
          options:
              - ä¸€èˆ¬ Bug / General Bug
              - å´©æºƒ / Crash
              - è¯†åˆ«é—®é¢˜ / Recognition Issue
      validations:
          required: true

    - type: textarea
      id: description
      attributes:
          label: é—®é¢˜æè¿°åŠå¤ç°æ­¥éª¤ / Problem Description & Reproduction Steps
          description: |
              è¯·æè¿°é¢„æœŸè¡Œä¸ºå’Œå®é™…è¡Œä¸ºï¼Œå¹¶æä¾›å¤ç°æ­¥éª¤  
              Describe expected vs actual behavior and provide reproduction steps
          placeholder: |
              é¢„æœŸè¡Œä¸º / Expected: ...  
              å®é™…è¡Œä¸º / Actual: ...  
              å¤ç°æ­¥éª¤ / Reproduction Steps:  
              1. ...  
              2. ...  
              3. ...
      validations:
          required: true

    - type: input
      id: version
      attributes:
          label: MaaFramework ç‰ˆæœ¬ / Version
          description: |
              è¯·æä¾›å‡†ç¡®çš„ç‰ˆæœ¬å·ï¼ˆå´©æºƒé—®é¢˜å¿…é¡»ç²¾ç¡®ï¼Œç”¨äºè°ƒè¯•ç¬¦å·åŒ¹é…ï¼‰  
              Provide exact version (critical for crash analysis due to debug symbols)
          placeholder: "ä¾‹å¦‚ / e.g.: v2.0.0"
      validations:
          required: true

    - type: textarea
      id: logs
      attributes:
          label: æ—¥å¿—æ–‡ä»¶ / Log Files
          description: |
              è¯·ä¸Šä¼ å®Œæ•´çš„ maa.log æ–‡ä»¶ï¼ˆä½äº `<å·¥ä½œç›®å½•>/debug/maa.log`ï¼‰  
              Please upload the complete maa.log file (located at `<working_dir>/debug/maa.log`)

              ğŸ’¡ è‹¥æ—¥å¿—è¿‡çŸ­ï¼Œè¯·åŒæ—¶ä¸Šä¼  `maa.bak.log`ï¼›å»ºè®®å¯¹æ¯”æ­£å¸¸/å¼‚å¸¸æ—¥å¿—æ—¶é‡å‘½ååŒºåˆ†
      validations:
          required: true

    - type: textarea
      id: pipeline
      attributes:
          label: Pipeline JSON
          description: |
              è‹¥ä¸ä»»åŠ¡æµç¨‹æˆ–è¯†åˆ«ç›¸å…³ï¼Œè¯·æä¾›ç›¸å…³èŠ‚ç‚¹é…ç½®  
              If related to task flow or recognition, provide relevant node configuration
          render: json
          placeholder: |
              {
                  "èŠ‚ç‚¹å": {
                      "recognition": "TemplateMatch",
                      "template": "xxx.png",
                      "threshold": 0.7,
                      ...
                  }
              }
      validations:
          required: false

    - type: textarea
      id: dump
      attributes:
          label: å´©æºƒ Dump æ–‡ä»¶ / Crash Dump (ä»…å´©æºƒé—®é¢˜ / Crash only)
          description: |
              **Windows**: `C:\Users\<ç”¨æˆ·å>\AppData\Local\CrashDumps\*.dmp`  
              **Linux/macOS**: Core dump æ–‡ä»¶æˆ– `dmesg` / ç³»ç»Ÿæ—¥å¿—

              âš ï¸ è¯·ç¡®è®¤æ–‡ä»¶ä¿®æ”¹æ—¥æœŸä¸å´©æºƒæ—¶é—´å¯¹åº”  
              Verify modification date matches crash time
      validations:
          required: false

    - type: textarea
      id: draw_images
      attributes:
          label: Draw è°ƒè¯•å›¾ç‰‡ / Draw Debug Images (ä»…è¯†åˆ«é—®é¢˜ / Recognition only)
          description: |
              å¼€å¯æ–¹å¼ï¼šåœ¨ `<å·¥ä½œç›®å½•>/config/maa_option.json` è®¾ç½® `"save_draw": true`  
              Enable: Set `"save_draw": true` in `<working_dir>/config/maa_option.json`

              ä¸Šä¼  `<å·¥ä½œç›®å½•>/debug/vision/` ç›®å½•ä¸‹å¯¹åº”çš„è°ƒè¯•å›¾ç‰‡  
              Upload debug images from `<working_dir>/debug/vision/`
      validations:
          required: false

    - type: textarea
      id: template_images
      attributes:
          label: æ¨¡æ¿å›¾ç‰‡ / Template Images (ä»…è¯†åˆ«é—®é¢˜ / Recognition only)
          description: |
              è¯·ä¸Šä¼  Pipeline ä¸­ `template` å­—æ®µå¼•ç”¨çš„å›¾ç‰‡ï¼ˆä½äº `resource/image/`ï¼‰  
              Upload images referenced by `template` field (located in `resource/image/`)
      validations:
          required: false

    - type: textarea
      id: additional
      attributes:
          label: å…¶ä»–ä¿¡æ¯ / Additional Information
          description: |
              å…¶ä»–å¯èƒ½æœ‰å¸®åŠ©çš„ä¿¡æ¯ï¼Œå¦‚è¿è¡Œç¯å¢ƒã€åŸå§‹æˆªå›¾ã€æœ€å°å¤ç°é¡¹ç›®ç­‰  
              Any other helpful information, such as original screenshots or minimal reproduction project
      validations:
          required: false

    - type: markdown
      attributes:
          value: |
              ---
              ## ğŸ“‹ æäº¤æ¸…å• / Submission Checklist

              ### æ‰€æœ‰é—®é¢˜å¿…éœ€ / Required for All Issues
              - âœ… å®Œæ•´çš„ `maa.log` æ—¥å¿—æ–‡ä»¶  
              - âœ… é—®é¢˜æè¿°ï¼ˆé¢„æœŸ vs å®é™…ï¼‰  
              - âœ… MaaFramework ç‰ˆæœ¬å·  

              ### å´©æºƒé—®é¢˜é¢å¤–æä¾› / Additional for Crash
              - ğŸ”¸ Crash Dump æ–‡ä»¶ï¼ˆ`.dmp`ï¼‰  
              - ğŸ”¸ **ç²¾ç¡®çš„ç‰ˆæœ¬å·**ï¼ˆè°ƒè¯•ç¬¦å·åŒ¹é…éœ€è¦ï¼‰  
              - ğŸ”¸ å´©æºƒå‰çš„æ“ä½œæ­¥éª¤

              ### è¯†åˆ«é—®é¢˜é¢å¤–æä¾› / Additional for Recognition
              - ğŸ”¸ Draw è°ƒè¯•å›¾ç‰‡ï¼ˆ`debug/vision/`ï¼‰  
              - ğŸ”¸ Pipeline JSONï¼ˆè¯†åˆ«é…ç½®ï¼‰  
              - ğŸ”¸ æ¨¡æ¿å›¾ç‰‡ï¼ˆ`resource/image/`ï¼‰  
              - ğŸ”¸ åŸå§‹æˆªå›¾ï¼ˆå»ºè®®æä¾›ï¼‰
